#define ENCA 2 // yellow
#define ENCB 3 //white
#define PWM 5
#define IN2 6
#define IN1 7

int pos = 0;
int prevT = 0;
float eprev = 0;
float eintegral = 0;

void setup() {
  // put your setup code here, to run once:
Serial.begin(9600);
pinMode(ENCA, INPUT);
pinMode(ENCB, INPUT);
pinMode(IN1, OUTPUT);
pinMode(IN2, OUTPUT);
pinMode(PWM, OUTPUT);
attachInterrupt(digitalPinToInterrupt(ENCA), readEncoder, RISING);

}

void loop() {
//int encoderPos = readEncoder();
//Serial.println(encoderPos);
  // put your main code here, to run repeatedly:
setMotor(2, 120, PWM, IN1, IN2);
//digitalWrite(IN1, HIGH);
//digitalWrite(IN2, LOW);
//analogWrite(PWM, 255);
}

void setMotor(int dir, int pwmVal, int pwm, int in1, int in2){
  analogWrite(pwm, pwmVal);
  if(dir == 1){
    digitalWrite(in1, HIGH);
    digitalWrite(in2, LOW);
  }
  else if (dir == 2){
    digitalWrite(in1, LOW);
    digitalWrite(in2, HIGH);
  }
  else{
    digitalWrite(in1, LOW);
    digitalWrite(in2, LOW);
  }
}

void readEncoder(){
int b = digitalRead(ENCB);
if(b>0){
  pos++;
}
  else{
    pos--;
    
  }
}
